<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Kadie AI • Server</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <script>
    // Compute server name for the header title
    (function () {
      const sp = new URLSearchParams(location.search);
      let title = sp.get('guild_name') || sp.get('guild_id') || 'Server';
      title = decodeURIComponent(title).replace(/\+/g, ' ');
      window.KADIE_HEADER = { title, description: "" };
    })();
  </script>
  <script src="/header.mount.js" defer></script>
  <link rel="stylesheet" href="/assets/main.css" />
  <style>
    .bar{display:flex;justify-content:flex-end;align-items:center;gap:12px;margin-bottom:12px}
    .btn{border:1px solid #2b2f3a;background:#11131a;color:#eaeaea;padding:8px 12px;border-radius:10px;cursor:pointer}
    .btn.primary{background:#0e2238;border-color:#1e3a8a;color:#dbeafe}
    .page{max-width:900px;margin:0 auto}
    /* Big single-action list */
    .actions{list-style:none;margin:24px 0;padding:0;display:flex;flex-direction:column;gap:14px}
    .actions .btn.big{
      width:100%;
      padding:22px 18px;
      font-size:18px;
      font-weight:800;
      border-radius:14px;
    }
  </style>
</head>
<body>
  <header class="container">
    <div class="bar">
      <button id="backBtn" class="btn" title="Back to server listings">Back</button>
    </div>
  </header>

  <main class="container page">
    <ul class="actions">
      <li>
        <button id="goBlueprints" class="btn primary big" type="button">Blueprints</button>
      </li>
    </ul>
  </main>

  <script type="module">
    // Back → tell parent to clear selection and return to listings
    document.getElementById('backBtn')?.addEventListener('click', () => {
      parent?.postMessage({ type: 'exitServer' }, '*');
    });

    // Open Blueprints in parent
    document.getElementById('goBlueprints')?.addEventListener('click', () => {
      parent?.postMessage({ type: 'openBlueprints' }, '*');
    });
  </script>

  <script src="/footer.mount.js" defer></script>
</body>
</html>
