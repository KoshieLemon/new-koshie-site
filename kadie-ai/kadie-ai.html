<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Kadie AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <link rel="stylesheet" href="/assets/main.css" />
  <style>
    :root{
      --bar-bg:#0b1020; --bar-bd:#1f2937; --ink:#e5e7eb; --muted:#9aa4b2;
      --accent:#60a5fa; --accent2:#22d3ee;
    }
    body{background:#0a0f1a;color:#e5e7eb}

    /* top bar */
    .topbar{position:sticky;top:0;z-index:1000;background:var(--bar-bg);border-bottom:1px solid var(--bar-bd)}
    .topbar .wrap{display:flex;align-items:center;gap:14px;height:56px;max-width:1200px;margin:0 auto;padding:0 12px}
    .brand{font-weight:800;letter-spacing:.2px}
    .tabs{display:flex;gap:4px;flex:1}
    .tab{display:inline-flex;align-items:center;gap:6px;height:42px;padding:0 12px;border:1px solid transparent;border-radius:10px;color:#cbd5e1;cursor:pointer;user-select:none}
    .tab:hover{background:#0f172a}
    .tab.active{background:#0f172a;border-color:#253045;color:var(--ink)}
    .tab.locked{opacity:.6;cursor:not-allowed}
    .grow{flex:1}
    .userbox{display:flex;align-items:center;gap:10px}
    .bell{font-size:18px;line-height:1;opacity:.9}
    .pfp{width:28px;height:28px;border-radius:999px;background:#111;border:1px solid #0007;object-fit:cover}
    .btn{border:1px solid #293548;background:#101825;color:#e6edf6;padding:8px 12px;border-radius:8px;cursor:pointer;text-align:center}
    .btn.primary{background:linear-gradient(90deg,var(--accent2),var(--accent));border-color:#0ea5e9;color:#041018;font-weight:700}
    .btn.block{display:block;width:100%}
    .btn[aria-disabled="true"]{opacity:.55;cursor:not-allowed}

    main{max-width:1200px;margin:14px auto;padding:0 12px}
    .view{display:none}.view.active{display:block}
    .muted{color:var(--muted)}

    /* server list: one column + scroll */
    .toolbar{display:flex;align-items:center;gap:10px;margin:12px 0}
    .search{flex:1}
    .search input{width:100%;box-sizing:border-box;border:1px solid #253045;background:#0c1421;color:#e5e7eb;padding:8px 10px;border-radius:8px;outline:none}
    .guild-list{display:flex;flex-direction:column;gap:12px;max-height:72vh;overflow:auto;padding-right:6px}
    .guild-card{border:1px solid #253045;border-radius:12px;background:#0c1421;padding:12px}
    .guild-head{display:flex;gap:12px;align-items:center}
    .guild-icon{width:42px;height:42px;border-radius:8px;background:#0b0f18;display:flex;align-items:center;justify-content:center;font-weight:800}
    .guild-name{margin:0}
    .badges{display:flex;gap:6px}
    .badge{font-size:10px;padding:2px 6px;border-radius:999px;background:#182032;border:1px solid #2a3550;color:#93c5fd}
    .badge.mgmt{color:#34d399;border-color:#0f5132;background:#0b2e1f}
    .small{font-size:12px;opacity:.8}
    .guild-meta{margin:6px 0 10px 0;color:#c7d2fe}
    .status{margin:8px 0;color:#93a1b5}

    .blank-card{border:1px dashed #334155;border-radius:12px;padding:20px;background:#0b1320}
    iframe.bp{width:100%;height:72vh;border:none;border-radius:12px;background:#06090f}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="wrap">
      <div class="brand">Kadie AI</div>
      <nav class="tabs" id="tabs">
        <button class="tab active" data-tab="simple">Simple Server</button>
        <button class="tab" data-tab="blueprints" id="tab-blueprints" style="display:none">Blueprints</button>
        <button class="tab locked" data-tab="community" id="tab-community" style="display:none">Community ðŸ”’</button>
        <button class="tab" data-tab="help">Help</button>
      </nav>
      <div class="grow"></div>
      <div class="userbox" id="userbox">
        <button id="signinBtn" class="btn primary">Sign in with Discord</button>
        <span id="notif" class="bell" title="Notifications" style="display:none">ðŸ””</span>
        <img id="pfp" class="pfp" alt="" style="display:none">
      </div>
    </div>
  </header>

  <main>
    <!-- Simple Server -->
    <section class="view active" id="view-simple">
      <div id="simple-unauthed">
        <p class="muted">Sign in to pick a Discord server.</p>
      </div>

      <div id="simple-picker" style="display:none">
        <div class="toolbar">
          <div class="search"><input id="srvSearch" type="search" placeholder="Search your serversâ€¦"></div>
          <div class="muted" id="countNote"></div>
        </div>
        <div id="srvStatus" class="status"></div>
        <div id="srvList" class="guild-list"></div>
      </div>

      <div id="simple-selected" style="display:none">
        <div class="blank-card">
          <h2 id="selName" style="margin:0 0 6px 0">Simple Server</h2>
          <div id="selMeta" class="muted" style="margin-bottom:10px"></div>
          <div class="muted" style="margin-top:14px">This page is blank for now.</div>
        </div>
      </div>
    </section>

    <!-- Blueprints -->
    <section class="view" id="view-blueprints">
      <div id="bp-guard">
        <p class="muted">Sign in and select a server to use Blueprints.</p>
      </div>
      <iframe id="bpFrame" class="bp" src="" title="Blueprints" style="display:none"></iframe>
    </section>

    <!-- Community -->
    <section class="view" id="view-community">
      <p class="muted">Community is locked.</p>
    </section>

    <!-- Help -->
    <section class="view" id="view-help">
      <p class="muted">Help goes here.</p>
    </section>
  </main>

  <script type="module" src="/kadie-ai/app.js"></script>
</body>
</html>
